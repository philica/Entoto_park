<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Dream - Aframe - VR walkthrough</title>
    <meta name="description" content="Dream - Aframe - VR walkthrough" />
    <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-animation-component@^4.1.2/dist/aframe-animation-component.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.5.1/dist/aframe-look-at-component.min.js"></script>

    <!-- Hotspot -->
    <script>
        AFRAME.registerComponent("hotspots", {
            init: function () {
                this.el.addEventListener("reloadspots", function (evt) {
                    //get the entire current spot group and scale it to 0
                    var currspotgroup = document.getElementById(evt.detail.currspots);
                    currspotgroup.setAttribute("scale", "0 0 0");

                    //get the entire new spot group and scale it to 1
                    var newspotgroup = document.getElementById(evt.detail.newspots);
                    newspotgroup.setAttribute("scale", "1 1 1");
                });
            },
        });
        AFRAME.registerComponent("spot", {
            schema: {
                linkto: { type: "string", default: "" },
                spotgroup: { type: "string", default: "" },
            },
            init: function () {
                //add image source of hotspot icon
                this.el.setAttribute("src", "#hotspot");
                //make the icon look at the camera all the time
                this.el.setAttribute("look-at", "#cam");

                var data = this.data;

                this.el.addEventListener("click", function () {
                    //set the skybox source to the new image as per the spot
                    var sky = document.getElementById("skybox");
                    sky.setAttribute("src", data.linkto);

                    var spotcomp = document.getElementById("spots");
                    var currspots = this.parentElement.getAttribute("id");
                    //create event for spots component to change the spots data
                    spotcomp.emit("reloadspots", {
                        newspots: data.spotgroup,
                        currspots: currspots,
                    });
                });
            },
        });

    </script>
</head>

<body>
    <a-scene background="color: #ECECEC">
        <a-assets>
            <!-- Images -->
            <img id="point1" src="./Asset/entoto park_01.png" />
            <img id="point2" src="./Asset/entoto park_02.png" />
            <img id="point3" src="./Asset/entoto park_03.png" />
            <img id="point4" src="./Asset/entoto park_04.png" />
            <img id="point5" src="./Asset/entoto park_05.png" />
            <img id="point6" src="./Asset/entoto park_06.png" />
            <img id="point7" src="./Asset/entoto park_07.png" />
            <img id="point8" src="./Asset/entoto park_08.png" />
            <img id="point9" src="./Asset/entoto park_09.png" />
            <img id="point10" src="./Asset/entoto park_10.png" />
            <img id="point11" src="./Asset/entoto park_11.png" />
            <img id="point12" src="./Asset/entoto park_12.png" />
            <img id="point13" src="./Asset/entoto park_14.png" />
            <img id="point14" src="./Asset/entoto park_16.png" />
            <img id="point15" src="./Asset/entoto park_19.png" />
            <img id="point16" src="./Asset/entoto park_20.png" />
            <img id="point17" src="./Asset/entoto park_21.png" />
            <img id="point18" src="./Asset/entoto park_22.png" />
            <img id="point19" src="./Asset/entoto park_23.png" />


            <!-- Hotspot image -->
            <img id="hotspot" src="./Asset/pointer.webp" />

        </a-assets>


        <a-entity id="spots" hotspots>
            <!-- first image -->
            <a-entity id="group-point1" scale="1 1 1">
                <a-image spot="linkto:#point2;spotgroup:group-point2" position="-17 2 10"></a-image>
            </a-entity>

            <!-- second image  -->
            <a-entity id="group-point2" scale="0 0 0">
                <a-image spot="linkto:#point3;spotgroup:group-point3" position="18 -0 -3"></a-image>
                <a-image spot="linkto:#point1;spotgroup:group-point1" position="-22 -1 0"></a-image>

            </a-entity>

            <!-- third image  -->
            <a-entity id="group-point3" scale="0 0 0">
                <a-image spot="linkto:#point7;spotgroup:group-point7" position="-7 -1 -8"></a-image>
                <a-image spot="linkto:#point4;spotgroup:group-point4" position="13 0 9"></a-image>

            </a-entity>

            <!-- fourth image  -->
            <a-entity id="group-point4" scale="0 0 0">
                <a-image spot="linkto:#point5;spotgroup:group-point5" position="19 -3 -10"></a-image>
                <a-image spot="linkto:#point3;spotgroup:group-point3" position="-10 -2 -10"></a-image>

            </a-entity>

            <!-- fifth image  -->
            <a-entity id="group-point5" scale="0 0 0">
                <a-image spot="linkto:#point6;spotgroup:group-point6" position="6 -1 13"></a-image>
                <a-image spot="linkto:#point4;spotgroup:group-point4" position="51 -10 5"></a-image>

            </a-entity>

            <!-- sixth image  -->
            <a-entity id="group-point6" scale="0 0 0">
                <a-image spot="linkto:#point5;spotgroup:group-point5" position="-9 -0 -3"></a-image>
                <a-image spot="linkto:#point7;spotgroup:group-point7" position="12 -0 6"></a-image>
                <a-image spot="linkto:#point3;spotgroup:group-point3" position="10 0 -7"></a-image>

            </a-entity>

            <!-- seventh image  -->
            <a-entity id="group-point7" scale="0 0 0">
                <a-image spot="linkto:#point8;spotgroup:group-point8" position="21 -3 -0"></a-image>
                <a-image spot="linkto:#point3;spotgroup:group-point3" position="-13 0 -9"></a-image>
                <a-image spot="linkto:#point6;spotgroup:group-point6" position="-33 -0 14"></a-image>

            </a-entity>

            <!-- Eighth image  -->
            <a-entity id="group-point8" scale="0 0 0">
                <a-image spot="linkto:#point9;spotgroup:group-point9" position="-12 -1 -0"></a-image>
                <a-image spot="linkto:#point7;spotgroup:group-point7" position="21 1 0"></a-image>

            </a-entity>

            <!-- Ninth image  -->
            <a-entity id="group-point9" scale="0 0 0">
                <a-image spot="linkto:#point10;spotgroup:group-point10" position="-19 -2 0"></a-image>
                <a-image spot="linkto:#point8;spotgroup:group-point8" position="11 1 0"></a-image>

            </a-entity>

            <!-- Tenth image  -->
            <a-entity id="group-point10" scale="0 0 0">
                <a-image spot="linkto:#point11;spotgroup:group-point11" position="-17 -2 -1"></a-image>
                <a-image spot="linkto:#point9;spotgroup:group-point9" position="21 2 3"></a-image>

            </a-entity>

            <!-- Eleventh image  -->
            <a-entity id="group-point11" scale="0 0 0">
                <a-image spot="linkto:#point12;spotgroup:group-point12" position="-15 -2 1"></a-image>
                <a-image spot="linkto:#point10;spotgroup:group-point10" position="63 4 1"></a-image>

            </a-entity>

            <!-- Twelth image  -->
            <a-entity id="group-point12" scale="0 0 0">
                <a-image spot="linkto:#point13;spotgroup:group-point13" position="13 -1 0"></a-image>
                <a-image spot="linkto:#point11;spotgroup:group-point11" position="-32 2 -2"></a-image>

            </a-entity>

            <!-- Thirteenth image  -->
            <a-entity id="group-point13" scale="0 0 0">
                <a-image spot="linkto:#point14;spotgroup:group-point14" position="-11 -3 -11"></a-image>
                <a-image spot="linkto:#point12;spotgroup:group-point12" position="31 0 -1"></a-image>

            </a-entity>

            <!-- Fourteenth image  -->
            <a-entity id="group-point14" scale="0 0 0">
                <a-image spot="linkto:#point15;spotgroup:group-point15" position="14 -2 4"></a-image>
                <a-image spot="linkto:#point19;spotgroup:group-point19" position="15 -0 -1"></a-image>
                <a-image spot="linkto:#point13;spotgroup:group-point13" position="3 -1 -26"></a-image>

            </a-entity>

            <!-- Fifteenth image  -->
            <a-entity id="group-point15" scale="0 0 0">
                <a-image spot="linkto:#point16;spotgroup:group-point16" position="-20 -0 -2"></a-image>
                <a-image spot="linkto:#point19;spotgroup:group-point19" position="-2 -1 18"></a-image>
                <a-image spot="linkto:#point14;spotgroup:group-point14" position="12 -6 -16"></a-image>

            </a-entity>

            <!-- sixteenth image  -->
            <a-entity id="group-point16" scale="0 0 0">
                <a-image spot="linkto:#point17;spotgroup:group-point17" position="-11 -1 15"></a-image>
                <a-image spot="linkto:#point15;spotgroup:group-point15" position="18 -1 11"></a-image>

            </a-entity>

            <!-- seventeenth image  -->
            <a-entity id="group-point17" scale="0 0 0">
                <a-image spot="linkto:#point18;spotgroup:group-point18" position="-10 -1 10"></a-image>
                <a-image spot="linkto:#point16;spotgroup:group-point16" position="14 -1 10"></a-image>

            </a-entity>

            <!-- eighteenth image  -->
            <a-entity id="group-point18" scale="0 0 0">
                <a-image spot="linkto:#point17;spotgroup:group-point17" position="10 -0 9"></a-image>
                <a-image spot="linkto:#point19;spotgroup:group-point19" position="-19 -1 11"></a-image>

            </a-entity>
            <!--nineteenth image-->
            <a-entity id="group-point19" scale="0 0 0">
                <a-image spot="linkto:#point16;spotgroup:group-point16" position="-32 -5 -18"></a-image>
                <a-image spot="linkto:#point18;spotgroup:group-point18" position="-17 -0 13"></a-image>
                <a-image spot="linkto:#point14;spotgroup:group-point14" position="16 0 -4"></a-image>

            </a-entity>

            <a-sky id="skybox" src="#point1"></a-sky>

            <!-- Camera and Cursor  -->
            <a-entity id="cam" camera position="0 1.6 0" look-controls>
                <a-entity cursor="fuse:true;fuseTimeout:1500"
                    geometry="primitive:ring;radiusInner:0.01;radiusOuter:0.02" position="0 0 -1.8"
                    material="shader:flat;color:#ff0000"
                    animation__mouseenter="property:scale;to:3 3 3;startEvents:mouseenter;endEvents:mouseleave;dir:reverse;dur:2000;loop:1">
                </a-entity>
            </a-entity>
    </a-scene>
</body>

</html>